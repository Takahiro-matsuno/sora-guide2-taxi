<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=10.0, user-scalable=yes">
    <title>予約確認画面</title>
    <link th:href="@{/css/common.css}" rel="stylesheet"/>
    <link th:href="@{/css/confirmation.css}" rel="stylesheet"/>
</head>
<body>
<div class="contents" th:object="${reservationForm}">
    <div class="display_box">
        <h1>予約確認</h1>

        <table class="rsvInfo">
            <tr>
                <th>乗車日</th>
                <td th:text="*{rideOnDateStr}"></td>
            </tr>
            <tr>
                <th>乗車時間</th>
                <td th:text="*{rideOnTime}"></td>
            </tr>
            <tr>
                <th>人数(大人)</th>
                <td th:text="*{adult + ' 人'}"></td>
            </tr>
            <tr>
                <th>人数(お子様)</th>
                <td th:text="*{child + ' 人'}"></td>
            </tr>
            <tr>
                <th>配車台数</th>
                <td th:text="*{carDispatchNumber + ' 台'}"></td>
            </tr>
            <tr>
                <th>タクシー会社</th>
                <td th:text="*{companyName}"></td>
            </tr>
            <tr>
                <th>目的地</th>
                <td th:text="*{destination}"></td>
            </tr>
            <tr>
                <th>氏名</th>
                <td th:text="*{passengerName}"></td>
            </tr>
            <tr>
                <th>フリガナ</th>
                <td th:text="*{passengerPhonetic}"></td>
            </tr>
            <tr>
                <th>電話番号</th>
                <td th:text="*{passengerContact}"></td>
            </tr>
            <tr>
                <th>メールアドレス</th>
                <td th:text="*{mail}"></td>
            </tr>
            <tr>
                <th>コメント</th>
                <td th:text="*{comment}"></td>
            </tr>
        </table>

    </div>

    <br/>

    <form th:action="@{./rsvComplete}" method="post" onsubmit="return checkDoubleSubmit();">
        <button class="left_button" type="submit" th:formaction="@{./registration}">戻る</button>
        <button class="right_button" id="btnSubmit" type="submit">送信</button>

        <input type="hidden" th:field="*{rideOnDate}"/>
        <input type="hidden" th:field="*{rideOnTime}"/>
        <input type="hidden" th:field="*{adult}"/>
        <input type="hidden" th:field="*{child}"/>
        <input type="hidden" th:field="*{carDispatchNumber}"/>
        <input type="hidden" th:field="*{companyName}"/>
        <input type="hidden" th:field="*{destination}"/>
        <input type="hidden" th:field="*{passengerName}"/>
        <input type="hidden" th:field="*{passengerPhonetic}"/>
        <input type="hidden" th:field="*{passengerContact}"/>
        <input type="hidden" th:field="*{mail}"/>
        <input type="hidden" th:field="*{mailCheck}"/>
        <input type="hidden" th:field="*{comment}"/>

    </form>
</div>

</body>
</html>
<script>
function checkDoubleSubmit(){
  var obj = document.getElementById("btnSubmit");
  if(obj.disabled){
    //ボタンがdisabledならsubmitしない
    return false;
  }else{
    //ボタンがdisabledでなければ、ボタンをdisabledにした上でsubmitする
    obj.disabled = true;
    return true;
  }
}
</script>